title: Declaration
prototype: false
prose: |
  The return value for [`sign`]().

  `Declaration` contains the products of digital signature: the original `data`, the public keys of the `signatories`, and the [ed25519]() `signatures`.

  This class is suitable for [`verify`]().

  > **Warning:** While a `Declaration` can be verified to be self-consistent, it is your responsiblity to verify the public keys in the `signatories` list belong to whomever claims them.

  `Declaration` contains helper methods to manage its data, summarized below.  Please see the relevant section for more details.

  - `to`: instance method to return formatted internal data
  - `from`: static method to hydrate an instance of `Declaration` from data
  - `isType`: static method providing a boolean type-check for `Declaration`


properties:
  data:
    type: "[`Uint8Array`]()"
    description: |
      The original data signed by the `signatories`.
  signatures:
    type: "[`Array`]() of [`Uint8Array`]()"
    description: |
      List of [ed25519]() signatures. Each is generated by signing `data` with a given signatory's private key.
  signatories:
    type: "[`Array`]() of [`Uint8Array`]()"
    description: |
      List of public keys. Each matches the corresponding signature in `signatures`.  These keys identify the signatories who used their private key to sign `data` and can be used to validate the corresponding signature.

staticMethods:
  isType:
    signatures:
      - inputs: [ value ]
        output: is-declaration
    variables:
      value:
        type: Value
        description: |
          A value to be tested.
      is-declaration:
        type: "[`Boolean`]()"
        description: |
          `true` if `value` is an instance of `Declaration`, `false` otherwise.
    prose: |
      Type check method to determine if the input `value` is an instance of `Declaration`.  Returns `true` or `false`.

  from:
    signatures:
      - inputs: [ hint, data ]
        output: declaration
    variables:
      hint:
        type: "[`String`]()"
        description: |
          name that specifies the `from` conversion hint.
      data:
        type: "[`String`]() | [`Uint8Array`]()"
        description: |
          A data representation of a declaration.
      declaration:
        type: "[`Declaration`]()"
        description: |
          Instance of [`Declaration`](), hydrated by the input `data`.
    prose: |
      Hydrates an instance of `Declaration` from given `data`.

      `hint` informs `from` how convert `data` into `Declaration`'s internal reprentation.

      #### Supported Hints
      - `bytes`: A byte array, specifically [`Uint8Array`]()
      - `utf8`: A [`String`]() with [UTF-8 encoding]()
      - `base64`: A [`String`]() with [Base64 encoding]()
      - `safe-base64`: A [`String`]() with [URL-Safe Base64 encoding]()

      Specifying an unsupported conversion throws.

      If `hint` conflicts with `data`'s type (ex: `data` is a byte array, while `hint` is "string"), `from` thows.

instanceMethods:
  to:
    signatures:
      - inputs: [ hint ]
        output: encoded-declaration
    variables:
      hint:
        type: "[`String`]()"
        description: |
          name that specifies the `to` conversion hint.
      encoded-declaration:
        type: "[`String`]() | [`Uint8Array`]()"
        description: |
          A data representation of a declaration.
    prose:  |
      Converts this instance's value into the form specified by `hint`.

      #### Supported Hints
      - `bytes`: A byte array, specifically [`Uint8Array`]()
      - `utf8`: A [`String`]() with [UTF-8 encoding]()
      - `base64`: A [`String`]() with [Base64 encoding]()
      - `safe-base64`: A [`String`]() with [URL-Safe Base64 encoding]()

      Specifying an unsupported conversion throws.
